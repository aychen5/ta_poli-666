<!DOCTYPE html>
<html>
<head>
  <title>Estimators &amp; Estimation (and DAGs too)</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'Estimators &amp; Estimation (and DAGs too)',
                        useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                      },

      // Author information
      presenters: [
            {
        name:  'Annie Chen' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="conf_0_files/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="conf_0_files/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="conf_0_files/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="conf_0_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="conf_0_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="conf_0_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="conf_0_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="conf_0_files/ioslides-13.5.1/js/hammer.js"></script>
  <script src="conf_0_files/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="conf_0_files/ioslides-13.5.1/js/slide-deck.js"></script>
  <script src="conf_0_files/htmlwidgets-1.5.1/htmlwidgets.js"></script>
  <script src="conf_0_files/viz-0.3/viz.js"></script>
  <link href="conf_0_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
  <script src="conf_0_files/grViz-binding-0.8.5/grViz.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    summary {
      display: list-item;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }
/* https://github.com/ropensci/plotly/pull/524#issuecomment-468142578 */
slide:not(.current) .plotly.html-widget{
  display: block;
}

  </style>

  <link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">1/10/2020</p>
          </hgroup>
  </slide>

<style>
div.footnotes {
  position: absolute;
  bottom: 0;
  margin-bottom: 10px;
  width: 80%;
  font-size: 0.6em;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script>
$(document).ready(function() {
  $('slide:not(.backdrop):not(.title-slide)').append('<div class=\"footnotes\">');

  $('footnote').each(function(index) {
    var text  = $(this).html();
    var fnNum = (index+1).toString();
    $(this).html(fnNum.sup());
    var footnote = fnNum + '. ' + text + '<br/>';
    var oldContent = $(this).parents('slide').children('div.footnotes').html();
    var newContent = oldContent + footnote;
    $(this).parents('slide').children('div.footnotes').html(newContent);
  });
});
</script>

<slide class=""><hgroup><h2>Some admin</h2></hgroup><article  id="some-admin">

<ul class = 'build'>
<li></li>
<li>Push problem sets to GitHub <!-- will try to get the grades back to you before your next one is due--></li>
<li>Office hours: Tuesdays 2:45pm to 3:45pm</li>
<li>other admin stuff?</li>
</ul>

</article></slide><slide class=""><hgroup><h2>An Alternative Causal Model: Causal Graphs</h2></hgroup><article  id="an-alternative-causal-model-causal-graphs">

<ul class = 'build'>
<li>The old paradigm: structural equation modeling (SEM) and path analysis

<center>

<img height="200px" src='images/path.jpg' title=''/>

</center></li>
</ul>

<div style="font-size: 12pt">
<ol class = 'build'>
<li>Postulate a causal mechanism and draw a corresponding path diagram</li>
<li>Translate it into a (typically linear) system of equations: \[  Y =  \alpha_0 + \alpha_1 X + \alpha_2 Z + \epsilon_\alpha \\
X = \beta_0 + \beta_1 Z + \beta_2 W + \beta_3 V + \epsilon_\beta \quad \cdots \]</li>
<li>Estimate \(\beta\), \(\alpha\), etc. typically assuming normality and exogeneity</li>
</ol></div>

<ul class = 'build'>
<li>However: Strong distributional/functional form assumptions and no language to distinguish causation from association</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Pearl&#39;s Attack</h2></hgroup><article  id="pearls-attack">

<div class="columns-2">
<img height="500px" src='images/pearlphoto.jpg' title='fig:'/>

<ul class = 'build'>
<li>Judea Pearl (1936–) proposed a new causal inference framework based on <span class="red">
nonparametric structural equation modeling (NPSEM) </span></li>
<li>Computer scientist, working on Artificial Intelligence</li>
<li><i>Causality</i> (2000, Cambridge UP)</li>
<li>Pearl’s framework builds on SEMs and revives it as a formal language of causality.</li>
</ul></div>

</article></slide><slide class=""><hgroup><h2>Anatomy of a Causal Directed Acyclic Graph (DAG)</h2></hgroup><article  id="anatomy-of-a-causal-directed-acyclic-graph-dag">

<ul>
<li>Composed of nodes (\(\bullet\) = observed or \(\circ\) = unobserved variables) and directed edges (\(\longrightarrow\) = possible causal relationship).</li>
<li>Exogenous variables that are not explicitly modelled can be omitted from a graph</li>
<li>It is <em>missing edges</em> that encode causal assumptions: missing arrows encode exclusion restrictions</li>
</ul>

<center>

<img height="200px" src='images/DAG2.jpg' title='fig:'/>

<img height="200px" src='images/DAG1.jpg' title=''/>

</center>

<ul class = 'build'>
<li>The corresponding structural equations:

<center>

\(z = f_z(u_z)\), \(x = f_x(z, u_x)\), and \(y = f_y(x, u_y)\)

</center></li>
</ul>

</article></slide><slide class=""><hgroup><h2></h2></hgroup><article  id="section">

<p>How do we get from:</p>

<center>

<img height="200px" src='images/DAG1.jpg' title=''/>

</center>

to:

<center>

<img height="200px" src='images/DAG1do.jpg' title=''/>

</center>

</article></slide><slide class=""><hgroup><h2><code>do()</code> Operator and Causal Effects</h2></hgroup><article  id="do-operator-and-causal-effects">

<ul class = 'build'>
<li><p>Treatments (interventions) are represented by the \(do()\) operator</p></li>
<li><p>For example, \(do(x_0)\) holds \(X\) at \(x_0\) exogenously (\(x = x_0\))</p></li>
<li><p>The pre-intervention distribution: \(P(x, y, z)\)</p></li>
<li>The post-intervention distribution: \(P(y, z \mid do(x_0))\)

<center>

<img height="100px" src='images/DAG1do.jpg' title=''/>

</center></li>
<li><p>Then, the ATE is defined as \(\mathbb{E}[Y\mid do(x_1)] - \mathbb{E}[Y\mid do(x_0)]\)</p></li>
<li><p>Identification: Can \(P(y\mid do(x))\) be estimated from data governed by the pre-intervention distribution \(P(x,y,z)\)?</p></li>
</ul>

<!-- $\mathbb{E}[Y\mid X=x_0] = \mathbb{E}[f_Y(x,u_Y)\mid X=x_0] \ = \mathbb{E}[f_Y(x_0, u_Y)]  = \ \mathbb{E}[Y\mid do(x_0)]$ -->

</article></slide><slide class=""><hgroup><h2>Why DAGs?</h2></hgroup><article  id="why-dags">

<ul class = 'build'>
<li>Fundamental equivalence of causal graphs and potential outcomes:</li>
</ul>

<center>

\(z = f_z(u_z)\), \(x = f_x(z, u_x)\), and \(y = f_y(x, u_y)\)

</center>

<center style="font-size: 30pt">

=

</center>

<center>

\(Z_i\), \(X_{Zi}\), and \(Y_{Xi}\)

</center>

<p><br></p>

<ul class = 'build'>
<li>Potential outcomes framework (Neyman-Rubin model) is the dominant framework for causal inference in the social sciences.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Why DAGs?</h2></hgroup><article  id="why-dags-1">

<ul class = 'build'>
<li>DAGs are a great way of encoding your causal assumptions.</li>
<li>I.e. Party id as the &quot;unmoved-mover&quot; (e.g., Campbell et al., 1966; Green and Palmquist, 1994; Miller and Shanks, 1996; Green et al., 2004)?</li>
<li><p>OR can short-term factors like issue positions <footnote>Carsey and Layman, 2006; Highton and Kam, 2011 </footnote>, candidate characteristics <footnote>Page and Jones, 1979</footnote>, and economic perceptions <footnote>Fiorina, 1981; MacKuen et al., 1989</footnote>, at least under some conditions, move party id?</p></li>
<li><center>

<img height="300px" src='images/vote_choice.png' title='fig:'/></li>
</ul>

</center>

</article></slide><slide class=""><hgroup><h2>Estimand, Estimators, and Estimates</h2></hgroup><article  id="estimand-estimators-and-estimates">

<p>What are these?</p>

<ul>
<li>\[Y = \beta_0 + \beta_1X_1 + u\]</li>
</ul>

<ul>
<li>\[Y = \hat{\beta_0} + \hat{\beta_1} X_1 + \hat{u} \]</li>
</ul>

<ul class = 'build'>
<li><div class="blue">
\[\hat{\beta} = (X^{\prime}X)^{-1}X^{\prime}y\]</div></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Estimand, Estimators, and Estimates</h2></hgroup><article  id="estimand-estimators-and-estimates-1">

<div style="float: left; width: 20%;">
<div id="htmlwidget-843ef3a4298c5b6b0f8c" style="width:720px;height:432px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-843ef3a4298c5b6b0f8c">{"x":{"diagram":"digraph flowchart {\n      # node definitions with substituted label text\n      node [fontname = Helvetica, shape = rectangle]        \n      tab1 [label = \"Estimand\"]\n      tab2 [label = \"Estimator\"]\n      tab3 [label = \"Estimate\"]\n\n      # edge definitions with the node IDs\n      tab1 -> tab2 -> tab3;\n      }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script></div>

<div style="float: right; width: 55%; font-size: 17pt">
<ul class = 'build'>
<li><p>\(\theta\): An unknown value that describes a population relationship. The concept we want to estimate.</p></li>
<li><div class="blue">
\(ATE = \mathbb{E}[Y_{1i} - Y_{0i}]\)</div></li>
<li><p>\(\widehat{\theta}(Y)\): A rule (i.e., function) for combining data to produce a numerical value for a population parameter (estimand);</p></li>
<li><div class="blue">
\(\widehat{ATE} = \frac{1}{n_1}\sum_{i=1}^n D_iY_i - \frac{1}{n_0}\sum_{i=1}^n (1-D_i)Y_i\)</div></li>
<li><p>\(\widehat{\theta}(Y=y)\): The numerical value(s) taken on by an estimator for a particular sample of data.</p></li>
</ul></div>

</article></slide><slide class=""><hgroup><h2>Estimation and Sampling Distribution</h2></hgroup><article  id="estimation-and-sampling-distribution">

<ul class = 'build'>
<li><p>Estimators produce estimates. Under repeated random sampling, they produce many estimates.</p></li>
<li><p>Assuming repeated random sampling, we can calculate the uncertainty around our point estimates.</p></li>
<li><p>Under repeated sampling, we also have a distribution of an estimate: a sampling distribution (the probability distribution of a statistic).</p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Sampling Distribution of the Mean</h2></hgroup><article  id="sampling-distribution-of-the-mean">

<ul class = 'build'>
<li><table id="t01"; style="width:80%; height:50%; border:1px solid black;margin-left:auto;margin-right:auto;">

<thead>

<tr>

<td style="text-align:center;">

<strong>Estimand</strong>

</th>

<td style="text-align:center;">

<strong>Estimator</strong>

</td>

<td style="text-align:center;">

<strong>Sampling Distribution</strong>

</td>

</tr>

</thead>

<tbody>

<tr>

<td style="text-align:center;">

<strong>\(\mathbb{E}(X) = \mu\) </strong>

</td>

<td style="text-align:center">

\(\bar{X}_n = \frac{1}{n}\sum_{i=1}^n X_i\)

</td>

<td style="text-align:center">

\(\bar{X}_n \sim \mathcal{N}(\mu,\frac{\sigma^2}{n})\)

</td>

</tr>

</tbody>

</table></li>
</ul>

<!--Create vector X of 1000 observations drawn from a Bernoulli distribution. Our Bernoulli distribution (the binomial with n = 1), which happens to have p = 0.5.-->

<pre class = 'prettyprint lang-r'>set.seed(01102020)
X &lt;- rbinom(1000, 1, 0.5)

mean.estimator = function(X) {
  # Calculate the size of the sample, n.
  n &lt;- length(X)
  # Apply the estimator to the sample data.
  mu.hat &lt;- (1/n) * sum(X)
  return(mu.hat)
}

# Estimate mean
mean.estimator(X)</pre>

<pre >## [1] 0.491</pre>

</article></slide><slide class=""><hgroup><h2>This is the sampling distribution of our estimator.</h2></hgroup><article  id="this-is-the-sampling-distribution-of-our-estimator.">

<pre class = 'prettyprint lang-r'>mu_samp &lt;- replicate(10000, mean.estimator(rbinom(1000, 1, 0.5)))</pre>

<p><img src="conf_0_files/figure-html/unnamed-chunk-5-1.png" width="480" style="display: block; margin: auto;" /></p>

</article></slide><slide class=""><hgroup><h2>Law of Large Numbers and Central Limit Theorem</h2></hgroup><article  id="law-of-large-numbers-and-central-limit-theorem">

<ul class = 'build'>
<li><p>Law of Large Numbers: If \(X_1,...,X_n\) are drawn independently from the distribution of \(X\) (randomly sampled), then the sample estimator for the mean converges in probability to the population average of \(X\) <footnote>\(\bar{X_n} \overset{p}{\to} \mathbb{E}[X]\) as \(n \to \infty\), assuming the expected value exists \(\mathbb{E}[X] &lt; \infty\)</footnote></p></li>
<li><p><img src="conf_0_files/figure-html/unnamed-chunk-6-1.png" width="480" style="display: block; margin: auto;" /></p></li>
</ul>

</article></slide><slide class=""><hgroup><h2></h2></hgroup><article >

<ul class = 'build'>
<li><p>Central Limit Theorem: The sampling distribution of the sample means approaches a Normal distribution as the sample size increases (no matter what the underlying population distribution is). <footnote>If \(X_1,...,X_N\) are drawn independently drawn from the distribution of \(X\), and \(\mathbb{V}[X] &lt; \infty\) then, the difference between the sample average of \(X\) and the population average of \(X\) (scaled by \(\sqrt{N}\)) converges in distribution to a Normal distribution. That is, \(\sqrt{N}(\bar{X}_N - \mathbb{E}[X]) \overset{D}{\to} \mathcal{N}(0, \sigma^2)\)</footnote></p></li>
<li><p><img src="conf_0_files/figure-html/unnamed-chunk-7-1.png" width="480" style="display: block; margin: auto;" /></p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>(Desirable) Properties of Estimators</h2></hgroup><article  id="desirable-properties-of-estimators">

<ul class = 'build'>
<li>Unbiasedness \[\mathbb{E}[\hat{\mu}] = \mu\] <!-- unbiasedness of an estimator is a property of repeated samples! --></li>
<li>(Relative) Efficiency \[\mathbb{V}[\hat{\mu_1}] &lt; \mathbb{V}[\hat{\mu_2}]\]</li>
<li>Consistency \[\hat{\mu} \overset{p}{\to} \mu\]</li>
<li>Asymptotic Normality \[\hat{\mu} \overset{approx.}{\sim} \mathcal{N}\Big(\mu, \frac{\sigma^2}{n}\Big)\]</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Review of potential outcomes</h2></hgroup><article  id="review-of-potential-outcomes">

<ul class = 'build'>
<li><p>\(D_i\): Indicator of treatment intake for unit \(i\), where \(i = 1, ..., N\); for now, \(D_i \in \{0,1\}\).</p></li>
<li><p>\(Y_i\): Variable of interest, whose value is observed, which may be affected by the treatment.</p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Review of potential outcomes</h2></hgroup><article  id="review-of-potential-outcomes-1">

<p>Which of these are observed?</p>

<table id="t01" ; style="width:80%; height:50%; border:1px solid black;margin-left:auto;margin-right:auto;">

<thead>

<tr>

<td style="text-align:center;">

</td>

<td style="text-align:center;">

<strong>\(Y = 1\)</strong>

</td>

<td style="text-align:center;">

<strong>\(Y = 0\)</strong>

</td>

</tr>

</thead>

<tbody>

<tr>

<td style="text-align:center;">

<strong>\(D = 1\) </strong>

</td>

<td style="text-align:center">

\(\mathbb{E}[Y_i(1)|D_i = 1]\)

</td>

<td style="text-align:center">

\(\mathbb{E}[Y_i(0)|D_i = 1]\)

</td>

</tr>

<tr>

<td style="text-align:center;">

<strong>\(D = 0\)</strong>

</td>

<td style="text-align:center">

\(\mathbb{E}[Y_i(1)|D_i = 0]\)

</td>

<td style="text-align:center;">

\(\mathbb{E}[Y_i(0)|D_i = 0]\)

</td>

</tr>

</tbody>

</table>

</article></slide><slide class=""><hgroup><h2>Review of potential outcomes</h2></hgroup><article  id="review-of-potential-outcomes-2">

<p>Which of these are observed?</p>

<table id="t01"; style="width:80%; height:50%; border:1px solid black;margin-left:auto;margin-right:auto;">

<thead>

<tr>

<td style="text-align:center;">

</th>

<td style="text-align:center;">

<strong>\(Y = 1\)</strong>

</td>

<td style="text-align:center;">

<strong>\(Y = 0\)</strong>

</td>

</tr>

</thead>

<tbody>

<tr>

<td style="text-align:center;">

<strong>\(D = 1\) </strong>

</td>

<td style="text-align:center">

\(\mathbb{E}[Y_i(1)|D_i = 1]\)

</td>

<td style="text-align:center; color:red">

\(\mathbb{E}[Y_i(0)|D_i = 1]\)

</td>

</tr>

<tr>

<td style="text-align:center;">

<strong>\(D = 0\)</strong>

</td>

<td style="text-align:center; color:red">

\(\mathbb{E}[Y_i(1)|D_i = 0]\)

</td>

<td style="text-align:center;">

\(\mathbb{E}[Y_i(0)|D_i = 0]\)

</td>

</tr>

</tbody>

</table>

<p><br></p>

<ul class = 'build'>
<li>This problem has a name&#8230; <br></li>
<li><div class="red">
The Fundamental Problem of Causal Inference!</div></li>
<li>Can&#39;t we just use this naive estimator? \(\mathbb{E}[Y_i|D_i = 1] - \mathbb{E}[Y_i|D_i = 0]\)</li>
<li><div class="blue">
It depends.</div></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Selection Bias</h2></hgroup><article  id="selection-bias">

<ul>
<li>Data from National Health Interview Survey (NHIS) 2005. Health status measured from 1 (poor health) to 5 (excellent health).</li>
</ul>

<table id="t01"; style="width:80%; height:50%; border:1px solid black;margin-left:auto;margin-right:auto;">

<thead>

<tr>

<td style="text-align:center;">

<strong> Group </strong>

</th>

<td style="text-align:center;">

<strong>Sample Size</strong>

</td>

<td style="text-align:center;">

<strong>Avg Health Status</strong>

</td>

<td style="text-align:center;">

<strong>Std Error</strong>

</td>

</tr>

</thead>

<tbody>

<tr>

<td style="text-align:center;">

Hospital

</td>

<td style="text-align:center">

7,774

</td>

<td style="text-align:center">

3.21

</td>

<td style="text-align:center">

0.014

</td>

</tr>

<tr>

<td style="text-align:center;">

No Hospital

</td>

<td style="text-align:center">

90,049

</td>

<td style="text-align:center">

3.93

</td>

<td style="text-align:center">

0.003

</td>

</tr>

</tbody>

</table>

<ul class = 'build'>
<li><span class="blue">
Going to the hospital makes people sick!? O_o </span></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Quiz yourself!</h2></hgroup><article  id="quiz-yourself">

<p>Are the following equalities always true?</p>

<ul>
<li>\(Y_{di} = Y_{i}(d)\)</li>
</ul>

<ul class = 'build'>
<li><div class="blue">
Yes.</div></li>
</ul>

<ul>
<li>\(\mathbb{E}[Y_{i}(0)|D_i = 1] = \mathbb{E}[Y_{i}(0)|D_i = 0]\)</li>
</ul>

<ul class = 'build'>
<li><div class="blue">
Nope.</div></li>
</ul>

<ul>
<li>\(Y_{i}(d_i) = Y_{i}(d_i, d_{i-1}, d_{i+1})\)</li>
</ul>

<ul class = 'build'>
<li><div class="blue">
Nope.</div>

<!-- SUTVA --></li>
</ul>

<ul>
<li>\(\mathbb{E}[Y_i(1) - Y_i(0)] = Y_i(1) - Y_i(0)\) <!-- unit vs. average effects --></li>
</ul>

<ul class = 'build'>
<li><div class="blue">
Nope again.</div></li>
</ul>

</article></slide><slide class=""><hgroup><h2>GitHub markdown</h2></hgroup><article  id="github-markdown"></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "conf_0_files/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
